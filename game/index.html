<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Drie op een Rij</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: white;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.1);
        }
        
        h1 {
            font-size: 2.5rem;
            background: linear-gradient(135deg, #00b4db, #0083b0);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }
        
        .subtitle {
            color: #a5b4cb;
            font-size: 1.1rem;
        }
        
        /* Game Container */
        .game-container {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        /* Score Display */
        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }
        
        .player-info {
            display: flex;
            gap: 20px;
        }
        
        .player {
            text-align: center;
        }
        
        .player.active {
            transform: scale(1.1);
        }
        
        .player-symbol {
            font-size: 2rem;
            margin-bottom: 5px;
        }
        
        .player-name {
            font-size: 1.1rem;
            font-weight: 600;
        }
        
        .player-x .player-symbol {
            color: #00b4db;
        }
        
        .player-o .player-symbol {
            color: #ff6b6b;
        }
        
        .game-status {
            text-align: center;
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            margin-bottom: 25px;
            font-size: 1.2rem;
            font-weight: 600;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* Game Board */
        .game-board {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            max-width: 400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 15px;
        }
        
        .cell {
            aspect-ratio: 1;
            background: rgba(255, 255, 255, 0.08);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3.5rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            user-select: none;
        }
        
        .cell:hover {
            background: rgba(255, 255, 255, 0.12);
            transform: scale(1.05);
        }
        
        .cell.x {
            color: #00b4db;
            text-shadow: 0 0 10px rgba(0, 180, 219, 0.5);
        }
        
        .cell.o {
            color: #ff6b6b;
            text-shadow: 0 0 10px rgba(255, 107, 107, 0.5);
        }
        
        .cell.win {
            background: rgba(34, 197, 94, 0.3);
            border: 2px solid #22c55e;
            animation: pulseWin 0.5s infinite alternate;
        }
        
        @keyframes pulseWin {
            from { transform: scale(1); }
            to { transform: scale(1.1); }
        }
        
        /* Game Controls */
        .game-controls {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            justify-content: center;
        }
        
        .game-btn {
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .start-btn {
            background: linear-gradient(135deg, #00b4db, #0083b0);
            color: white;
        }
        
        .start-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 180, 219, 0.4);
        }
        
        .reset-btn {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }
        
        .reset-btn:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-3px);
        }
        
        /* Action Buttons */
        .action-buttons {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 30px;
        }
        
        .action-btn {
            padding: 25px 15px;
            border: none;
            border-radius: 15px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 12px;
        }
        
        .action-btn i {
            font-size: 2.2rem;
        }
        
        .fullscreen-btn {
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
            color: white;
        }
        
        .fullscreen-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(139, 92, 246, 0.4);
        }
        
        .download-btn {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
        }
        
        .download-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(16, 185, 129, 0.4);
        }
        
        .scoreboard-btn {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
        }
        
        .scoreboard-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(245, 158, 11, 0.4);
        }
        
        /* Score Board */
        .score-board {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 20px;
            margin-top: 25px;
            display: none;
        }
        
        .score-board h3 {
            color: #f59e0b;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .score-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            text-align: center;
        }
        
        .stat-item {
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #00b4db;
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: #a5b4cb;
        }
        
        /* Instructions */
        .instructions {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 20px;
            margin-top: 30px;
        }
        
        .instructions h3 {
            color: #00b4db;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .instructions ul {
            padding-left: 20px;
            color: #a5b4cb;
        }
        
        .instructions li {
            margin-bottom: 8px;
        }
        
        /* Sneltoets hint */
        .shortcut-hint {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.5);
            padding: 10px 15px;
            border-radius: 8px;
            font-size: 12px;
            color: #a5b4cb;
        }
        
        /* Winner Animation */
        @keyframes confetti {
            0% { transform: translateY(0) rotate(0deg); opacity: 1; }
            100% { transform: translateY(500px) rotate(360deg); opacity: 0; }
        }
        
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: #00b4db;
            animation: confetti 2s linear forwards;
            z-index: 1000;
        }
        
        /* Fullscreen styles */
        body:fullscreen {
            background: #1a1a2e;
            padding: 50px;
        }
        
        body:fullscreen .container {
            max-width: 1000px;
        }
        
        body:fullscreen .game-board {
            max-width: 500px;
            gap: 15px;
        }
        
        body:fullscreen .cell {
            font-size: 4.5rem;
        }
        
        /* Mobile responsive */
        @media (max-width: 768px) {
            .action-buttons {
                grid-template-columns: 1fr;
            }
            
            .game-header {
                flex-direction: column;
                gap: 15px;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .cell {
                font-size: 2.5rem;
            }
        }
    </style>
    <!-- Font Awesome voor iconen -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Drie op een Rij</h1>
            <p class="subtitle">Speel tegen de computer of een vriend!</p>
        </header>
        
        <div class="game-container">
            <!-- Game Header -->
            <div class="game-header">
                <div class="player-info">
                    <div class="player player-x active" id="playerX">
                        <div class="player-symbol">‚úï</div>
                        <div class="player-name">Speler X</div>
                        <div class="player-score" id="scoreX">0</div>
                    </div>
                    <div class="player player-o" id="playerO">
                        <div class="player-symbol">‚óã</div>
                        <div class="player-name">Speler O</div>
                        <div class="player-score" id="scoreO">0</div>
                    </div>
                </div>
                
                <div class="game-mode">
                    <select id="gameMode" onchange="changeGameMode()" style="padding: 10px; border-radius: 8px; background: rgba(255,255,255,0.1); color: white; border: 1px solid rgba(255,255,255,0.2);">
                        <option value="friend">Tegen Vriend</option>
                        <option value="computer">Tegen Computer</option>
                    </select>
                </div>
            </div>
            
            <!-- Game Status -->
            <div class="game-status" id="gameStatus">
                Beurt van: <span id="currentPlayer">Speler X</span>
            </div>
            
            <!-- Game Board -->
            <div class="game-board" id="gameBoard">
                <!-- 3x3 grid wordt hier gegenereerd -->
            </div>
            
            <!-- Game Controls -->
            <div class="game-controls">
                <button class="game-btn start-btn" onclick="startNewGame()">
                    <i class="fas fa-play"></i> Nieuw Spel
                </button>
                <button class="game-btn reset-btn" onclick="resetScores()">
                    <i class="fas fa-redo"></i> Reset Scores
                </button>
            </div>
            
            <!-- Action Buttons -->
            <div class="action-buttons">
                <button class="action-btn fullscreen-btn" onclick="toggleFullscreen()">
                    <i class="fas fa-expand"></i>
                    <span>Fullscreen</span>
                </button>
                
                <button class="action-btn download-btn" onclick="goToDownloader()">
                    <i class="fas fa-download"></i>
                    <span>Download</span>
                </button>
                
                <button class="action-btn scoreboard-btn" onclick="toggleScoreboard()">
                    <i class="fas fa-trophy"></i>
                    <span>Scoreboard</span>
                </button>
            </div>
            
            <!-- Score Board -->
            <div class="score-board" id="scoreBoard">
                <h3><i class="fas fa-chart-bar"></i> Statistieken</h3>
                <div class="score-stats">
                    <div class="stat-item">
                        <div class="stat-value" id="statGames">0</div>
                        <div class="stat-label">Gespeeld</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="statWinsX">0</div>
                        <div class="stat-label">X Gewonnen</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="statWinsO">0</div>
                        <div class="stat-label">O Gewonnen</div>
                    </div>
                </div>
            </div>
            
            <!-- Instructions -->
            <div class="instructions">
                <h3><i class="fas fa-info-circle"></i> Hoe speel je?</h3>
                <ul>
                    <li><strong>Speler X</strong> begint altijd</li>
                    <li>Klik op een vakje om je symbool te plaatsen</li>
                    <li>Drie op een rij (horizontaal, verticaal of diagonaal) wint!</li>
                    <li>Kies tussen spelen tegen een vriend of de computer</li>
                    <li>Gebruik de knoppen hieronder voor extra functies</li>
                </ul>
            </div>
        </div>
    </div>
    
    <div class="shortcut-hint">
        Sneltoets: F = Fullscreen, D = Download, N = Nieuw spel, R = Reset
    </div>

    <script>
        // Game variabelen
        let board = Array(9).fill('');
        let currentPlayer = 'X';
        let gameActive = true;
        let scores = {
            X: 0,
            O: 0,
            ties: 0
        };
        let gameMode = 'friend'; // 'friend' of 'computer'
        let totalGames = 0;
        
        // Winning combinaties
        const winPatterns = [
            [0, 1, 2], [3, 4, 5], [6, 7, 8], // Rijen
            [0, 3, 6], [1, 4, 7], [2, 5, 8], // Kolommen
            [0, 4, 8], [2, 4, 6]             // Diagonalen
        ];
        
        // Elementen
        const gameBoard = document.getElementById('gameBoard');
        const gameStatus = document.getElementById('gameStatus');
        const playerXElement = document.getElementById('playerX');
        const playerOElement = document.getElementById('playerO');
        const scoreXElement = document.getElementById('scoreX');
        const scoreOElement = document.getElementById('scoreO');
        const scoreBoard = document.getElementById('scoreBoard');
        const currentPlayerElement = document.getElementById('currentPlayer');
        
        // Statistiek elementen
        const statGames = document.getElementById('statGames');
        const statWinsX = document.getElementById('statWinsX');
        const statWinsO = document.getElementById('statWinsO');
        
        // Initialiseer game
        initGame();
        
        function initGame() {
            // Laad scores uit localStorage
            const savedScores = localStorage.getItem('ticTacToeScores');
            if (savedScores) {
                scores = JSON.parse(savedScores);
            }
            
            const savedGames = localStorage.getItem('ticTacToeGames');
            if (savedGames) {
                totalGames = parseInt(savedGames);
            }
            
            // Update UI
            updateScores();
            updateStats();
            
            // Maak game board
            createBoard();
            
            // Update status
            updateGameStatus();
        }
        
        function createBoard() {
            gameBoard.innerHTML = '';
            
            for (let i = 0; i < 9; i++) {
                const cell = document.createElement('div');
                cell.className = 'cell';
                cell.dataset.index = i;
                
                cell.addEventListener('click', () => handleCellClick(i));
                gameBoard.appendChild(cell);
            }
        }
        
        function handleCellClick(index) {
            if (!gameActive || board[index] !== '') return;
            
            // Plaats symbool
            board[index] = currentPlayer;
            const cell = document.querySelector(`[data-index="${index}"]`);
            cell.textContent = currentPlayer;
            cell.classList.add(currentPlayer.toLowerCase());
            
            // Controleer op winnaar of gelijkspel
            if (checkWinner()) {
                endGame(currentPlayer);
                return;
            }
            
            if (isBoardFull()) {
                endGame('tie');
                return;
            }
            
            // Wissel speler
            currentPlayer = currentPlayer === 'X' ? 'O' : 'X';
            updateGameStatus();
            
            // Als modus computer en het is computer's beurt
            if (gameMode === 'computer' && currentPlayer === 'O' && gameActive) {
                setTimeout(makeComputerMove, 500);
            }
        }
        
        function makeComputerMove() {
            if (!gameActive) return;
            
            // Eenvoudige AI: probeer eerst te winnen, dan blokkeren, dan random
            let moveIndex = findWinningMove('O'); // Probeer te winnen
            
            if (moveIndex === -1) {
                moveIndex = findWinningMove('X'); // Probeer X te blokkeren
            }
            
            if (moveIndex === -1) {
                // Random move
                const availableMoves = board.map((cell, index) => cell === '' ? index : -1)
                                          .filter(index => index !== -1);
                if (availableMoves.length > 0) {
                    moveIndex = availableMoves[Math.floor(Math.random() * availableMoves.length)];
                }
            }
            
            if (moveIndex !== -1) {
                handleCellClick(moveIndex);
            }
        }
        
        function findWinningMove(player) {
            for (const pattern of winPatterns) {
                const [a, b, c] = pattern;
                const cells = [board[a], board[b], board[c]];
                
                // Tel aantal van deze speler in dit patroon
                const countPlayer = cells.filter(cell => cell === player).length;
                const countEmpty = cells.filter(cell => cell === '').length;
                
                // Als er 2 van deze speler en 1 leeg is, winst mogelijk
                if (countPlayer === 2 && countEmpty === 1) {
                    const emptyIndex = pattern[cells.findIndex(cell => cell === '')];
                    if (board[emptyIndex] === '') {
                        return emptyIndex;
                    }
                }
            }
            return -1;
        }
        
        function checkWinner() {
            for (const pattern of winPatterns) {
                const [a, b, c] = pattern;
                if (board[a] && board[a] === board[b] && board[a] === board[c]) {
                    // Markeer winnende cellen
                    pattern.forEach(index => {
                        document.querySelector(`[data-index="${index}"]`).classList.add('win');
                    });
                    return true;
                }
            }
            return false;
        }
        
        function isBoardFull() {
            return board.every(cell => cell !== '');
        }
        
        function updateGameStatus() {
            if (!gameActive) return;
            
            const playerName = currentPlayer === 'X' ? 'Speler X' : 
                             (gameMode === 'computer' ? 'Computer' : 'Speler O');
            
            currentPlayerElement.textContent = playerName;
            gameStatus.innerHTML = `Beurt van: <span style="color: ${currentPlayer === 'X' ? '#00b4db' : '#ff6b6b'}">${playerName}</span>`;
            
            // Update actieve speler
            playerXElement.classList.toggle('active', currentPlayer === 'X');
            playerOElement.classList.toggle('active', currentPlayer === 'O');
        }
        
        function endGame(winner) {
            gameActive = false;
            totalGames++;
            
            if (winner === 'tie') {
                gameStatus.innerHTML = '<span style="color:#f59e0b;">ü§ù Gelijkspel!</span>';
                scores.ties++;
            } else {
                gameStatus.innerHTML = `<span style="color:#22c55e;">üéâ ${winner === 'X' ? 'Speler X' : 'Speler O'} wint!</span>`;
                scores[winner]++;
                
                // Confetti effect
                createConfetti();
            }
            
            // Update scores en stats
            updateScores();
            updateStats();
            saveToLocalStorage();
        }
        
        function createConfetti() {
            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.background = `hsl(${Math.random() * 360}, 100%, 60%)`;
                confetti.style.width = Math.random() * 10 + 5 + 'px';
                confetti.style.height = Math.random() * 10 + 5 + 'px';
                
                document.body.appendChild(confetti);
                
                // Verwijder na animatie
                setTimeout(() => {
                    confetti.remove();
                }, 2000);
            }
        }
        
        function updateScores() {
            scoreXElement.textContent = scores.X;
            scoreOElement.textContent = scores.O;
        }
        
        function updateStats() {
            statGames.textContent = totalGames;
            statWinsX.textContent = scores.X;
            statWinsO.textContent = scores.O;
        }
        
        function saveToLocalStorage() {
            localStorage.setItem('ticTacToeScores', JSON.stringify(scores));
            localStorage.setItem('ticTacToeGames', totalGames.toString());
        }
        
        function startNewGame() {
            board = Array(9).fill('');
            currentPlayer = 'X';
            gameActive = true;
            
            // Reset board UI
            document.querySelectorAll('.cell').forEach(cell => {
                cell.textContent = '';
                cell.classList.remove('x', 'o', 'win');
            });
            
            updateGameStatus();
        }
        
        function resetScores() {
            if (confirm('Weet je zeker dat je alle scores wilt resetten?')) {
                scores = { X: 0, O: 0, ties: 0 };
                totalGames = 0;
                updateScores();
                updateStats();
                saveToLocalStorage();
                startNewGame();
            }
        }
        
        function changeGameMode() {
            gameMode = document.getElementById('gameMode').value;
            startNewGame();
        }
        
        function toggleScoreboard() {
            scoreBoard.style.display = scoreBoard.style.display === 'none' ? 'block' : 'none';
        }
        
        // Fullscreen functie
        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen().catch(err => {
                    console.log(`Fullscreen error: ${err.message}`);
                });
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                }
            }
        }
        
        // Download functie - GAAT DIRECT NAAR DOWNLOADER
        function goToDownloader() {
            console.log('üì• Doorsturen naar downloader...');
            
            // TOON BERICHT
            gameStatus.innerHTML = '<span style="color:#10b981;">üì• Doorsturen naar downloader...</span>';
            
            // WACHT 1 SECONDE DAN DOORSTUREN
            setTimeout(() => {
                // VERVANG HUIDIGE TABLAD MET DOWNLOADER
                window.location.replace('https://minkemacollege.github.io/downloader');
            }, 1000);
        }
        
        // Sneltoetsen
        document.addEventListener('keydown', function(e) {
            // F = Fullscreen
            if (e.key === 'f' || e.key === 'F') {
                e.preventDefault();
                toggleFullscreen();
            }
            
            // D = Download
            if (e.key === 'd' || e.key === 'D') {
                e.preventDefault();
                goToDownloader();
            }
            
            // N = Nieuw spel
            if (e.key === 'n' || e.key === 'N') {
                e.preventDefault();
                startNewGame();
            }
            
            // R = Reset scores
            if (e.key === 'r' || e.key === 'R') {
                e.preventDefault();
                resetScores();
            }
            
            // 1-9 = Cel klikken
            if (e.key >= '1' && e.key <= '9' && gameActive) {
                const index = parseInt(e.key) - 1;
                if (index >= 0 && index < 9 && board[index] === '') {
                    handleCellClick(index);
                }
            }
            
            // ESC = Exit fullscreen
            if (e.key === 'Escape' && document.fullscreenElement) {
                document.exitFullscreen();
            }
        });
        
        // Fullscreen change event
        document.addEventListener('fullscreenchange', function() {
            if (document.fullscreenElement) {
                console.log('Entered fullscreen mode');
            } else {
                console.log('Exited fullscreen mode');
            }
        });
        
        console.log('üéÆ Drie op een Rij geladen!');
        console.log('üì• Download knop gaat naar: https://minkemacollege.github.io/downloader');
        console.log('üéÆ Sneltoetsen: F = Fullscreen, D = Download, N = Nieuw spel, R = Reset, 1-9 = Cel selecteren');
        console.log('üíæ Scores worden opgeslagen in localStorage');
    </script>
</body>
</html>
